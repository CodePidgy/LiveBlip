
@page "/welcome"
@inject NavigationManager NavManager

<PageTitle>Welcome</PageTitle>


<MudGrid Class="xs=12">


<MudPaper Class="mx-auto my-16 pa-6 mud-theme-dark border-solid border-2 pa-4 " Height="230px" Width="50%" Elevation="22" Outlined="true">


    <MudContainer MaxWidth="MaxWidth.Small" Class="d-flex align-content-center flex-wrap flex-grow-1 gap-4">
        <MudText Class=" pa-4 pl-14 " Color="Color.Secondary" Typo="Typo.h4"><b>Welcome to</b > </MudText>
		<MudImage Class="ml-n9"  Src="images\logo.png" Width="250" Height="70"/>
     </MudContainer>



<MudForm  @ref="form" @bind-IsValid="@success" @bind-Errors="@errors" >
     <MudContainer  Class=" ml-7 d-flex align-content-center flex-wrap flex-grow-1 gap-4">

          <MudTextField  @bind-Value="HelperText" Label="Please input tracker IMEI" Variant="Variant.Filled " Margin="Margin.Dense" Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.Search" OnAdornmentClick="@(()=>form.Validate())" AdornmentColor="Color.Primary" @ref="imeiField1" Validation="@(new Func<string, IEnumerable<string>>(ImeiValidation))" Required="true" RequiredError="Correct IMEI number is required!"/>
              <MudPaper Elevation="0" Class=" mud-theme-dark">

			  <MudIconButton Icon="@Icons.Material.Filled.QuestionMark" Color="Color.Primary" OnClick="ShowInfo"/>
         </MudPaper>
@if (isInfoVisible)
{

	<MudChip Class="ml-n9 my-n2">
        <MudText Typo="Typo.inherit">
		 The IMEI number is a unique 15-digit serial number for identifying a device. <br />
		 You should be able to find your IMEI number on your device, typically on the back.<br>
         </MudText>
        <MudIconButton Class="mx2" Icon="@Icons.Material.Filled.Close"  Color="Color.Primary" OnClick="ExitInfo"/>
    </MudChip>
}
      </MudContainer>
</MudForm>

</MudPaper>

</MudGrid>







@code
{
private bool isInfoVisible = false;
public string HelperText { get; set; }
string IMEI = "000000000000000";
bool success;
string[] errors = { };
MudForm form = new MudForm();
MudTextField<string> imeiField1;

private IEnumerable<string> ImeiValidation(string imei)
{
if (string.IsNullOrWhiteSpace(imei))
{
yield return " ";
yield break;
}
if (imeiField1.Value != IMEI){
yield  return "Invalid IMEI number";
yield break;
}

if (imeiField1.Value == IMEI)
 NavManager.NavigateTo("/");
}

 private void ShowInfo()
{
isInfoVisible = true;
}
private void ExitInfo()
{
isInfoVisible = false;
}

}




